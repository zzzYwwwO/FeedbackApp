import{p as q,av as ue,g as J,a5 as Q,aw as ie,v as F,ae as Y,U as re,W as w,u as K,Y as se,N as B,aA as _,$ as b,c as i,V as ce,aS as de,R as A,Q as fe,ap as ve,x as me,aG as ge,J as U,a7 as $,a8 as xe,aW as he,aU as Ve,ao as we,aI as ye}from"./index-CpSVTHYs.js";import{i as Pe,f as X,k as Ee,l as Fe,n as be,o as j,p as Ce,q as Ie,r as Se}from"./VInput-s2frS__W.js";const Re=q({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ue({origin:"center center",scrollStrategy:"block",transition:{component:Pe},zIndex:2400})},"VDialog"),De=J()({name:"VDialog",props:Re(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,D){let{emit:y,slots:h}=D;const l=Q(e,"modelValue"),{scopeId:r}=ie(),a=F();function C(o){var s,m;const d=o.relatedTarget,v=o.target;if(d!==v&&((s=a.value)!=null&&s.contentEl)&&((m=a.value)!=null&&m.globalTop)&&![document,a.value.contentEl].includes(v)&&!a.value.contentEl.contains(v)){const n=se(a.value.contentEl);if(!n.length)return;const V=n[0],I=n[n.length-1];d===V?I.focus():V.focus()}}Y(()=>{document.removeEventListener("focusin",C)}),re&&w(()=>l.value&&e.retainFocus,o=>{o?document.addEventListener("focusin",C):document.removeEventListener("focusin",C)},{immediate:!0});function H(){var o;y("afterEnter"),(o=a.value)!=null&&o.contentEl&&!a.value.contentEl.contains(document.activeElement)&&a.value.contentEl.focus({preventScroll:!0})}function N(){y("afterLeave")}return w(l,async o=>{var d;o||(await B(),(d=a.value.activatorEl)==null||d.focus({preventScroll:!0}))}),K(()=>{const o=_.filterProps(e),d=b({"aria-haspopup":"dialog"},e.activatorProps),v=b({tabindex:-1},e.contentProps);return i(_,b({ref:a,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},o,{modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,"aria-modal":"true",activatorProps:d,contentProps:v,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:H,onAfterLeave:N},r),{activator:h.activator,default:function(){for(var s=arguments.length,m=new Array(s),n=0;n<s;n++)m[n]=arguments[n];return i(ce,{root:"VDialog"},{default:()=>{var V;return[(V=h.default)==null?void 0:V.call(h,...m)]}})}})}),X({},a)}}),ke=q({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ee(),...Fe()},"VTextarea"),He=J()({name:"VTextarea",directives:{Intersect:de},inheritAttrs:!1,props:ke(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,D){let{attrs:y,emit:h,slots:l}=D;const r=Q(e,"modelValue"),{isFocused:a,focus:C,blur:H}=be(e),N=A(()=>typeof e.counterValue=="function"?e.counterValue(r.value):(r.value||"").toString().length),o=A(()=>{if(y.maxlength)return y.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function d(t,c){var u,f;!e.autofocus||!t||(f=(u=c[0].target)==null?void 0:u.focus)==null||f.call(u)}const v=F(),s=F(),m=fe(""),n=F(),V=A(()=>e.persistentPlaceholder||a.value||e.active);function I(){var t;n.value!==document.activeElement&&((t=n.value)==null||t.focus()),a.value||C()}function Z(t){I(),h("click:control",t)}function p(t){h("mousedown:control",t)}function ee(t){t.stopPropagation(),I(),B(()=>{r.value="",Ve(e["onClick:clear"],t)})}function te(t){var u;const c=t.target;if(r.value=c.value,(u=e.modelModifiers)!=null&&u.trim){const f=[c.selectionStart,c.selectionEnd];B(()=>{c.selectionStart=f[0],c.selectionEnd=f[1]})}}const P=F(),S=F(+e.rows),T=A(()=>["plain","underlined"].includes(e.variant));ve(()=>{e.autoGrow||(S.value=+e.rows)});function E(){e.autoGrow&&B(()=>{if(!P.value||!s.value)return;const t=getComputedStyle(P.value),c=getComputedStyle(s.value.$el),u=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),f=P.value.scrollHeight,R=parseFloat(t.lineHeight),M=Math.max(parseFloat(e.rows)*R+u,parseFloat(c.getPropertyValue("--v-input-control-height"))),z=parseFloat(e.maxRows)*R+u||1/0,x=ye(f??0,M,z);S.value=Math.floor((x-u)/R),m.value=we(x)})}me(E),w(r,E),w(()=>e.rows,E),w(()=>e.maxRows,E),w(()=>e.density,E);let g;return w(P,t=>{t?(g=new ResizeObserver(E),g.observe(P.value)):g==null||g.disconnect()}),Y(()=>{g==null||g.disconnect()}),K(()=>{const t=!!(l.counter||e.counter||e.counterValue),c=!!(t||l.details),[u,f]=ge(y),{modelValue:R,...M}=j.filterProps(e),z=Ce(e);return i(j,b({ref:v,modelValue:r.value,"onUpdate:modelValue":x=>r.value=x,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":T.value},e.class],style:e.style},u,M,{centerAffix:S.value===1&&!T.value,focused:a.value}),{...l,default:x=>{let{id:k,isDisabled:G,isDirty:L,isReadonly:ae,isValid:ne}=x;return i(Ie,b({ref:s,style:{"--v-textarea-control-height":m.value},onClick:Z,onMousedown:p,"onClick:clear":ee,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},z,{id:k.value,active:V.value||L.value,centerAffix:S.value===1&&!T.value,dirty:L.value||e.dirty,disabled:G.value,focused:a.value,error:ne.value===!1}),{...l,default:le=>{let{props:{class:O,...W}}=le;return i(U,null,[e.prefix&&i("span",{class:"v-text-field__prefix"},[e.prefix]),$(i("textarea",b({ref:n,class:O,value:r.value,onInput:te,autofocus:e.autofocus,readonly:ae.value,disabled:G.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:I,onBlur:H},W,f),null),[[xe("intersect"),{handler:d},null,{once:!0}]]),e.autoGrow&&$(i("textarea",{class:[O,"v-textarea__sizer"],id:`${W.id}-sizer`,"onUpdate:modelValue":oe=>r.value=oe,ref:P,readonly:!0,"aria-hidden":"true"},null),[[he,r.value]]),e.suffix&&i("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:c?x=>{var k;return i(U,null,[(k=l.details)==null?void 0:k.call(l,x),t&&i(U,null,[i("span",null,null),i(Se,{active:e.persistentCounter||a.value,value:N.value,max:o.value,disabled:e.disabled},l.counter)])])}:void 0})}),X({},v,s,n)}});export{De as V,He as a};
