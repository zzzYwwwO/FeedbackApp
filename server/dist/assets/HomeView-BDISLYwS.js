import{p as E,m as j,g as U,a as Y,u as q,c as t,I as ee,b as ae,d as te,e as se,f as ne,h as le,i as oe,j as re,k as ie,l as ue,n as de,o as ce,q as me,r as fe,s as ve,t as L,V as be,v as b,_ as ge,w as ye,x as ke,y as M,z as R,A as n,B as P,C as g,D as h,E as y,F as xe,G as Ve,H as pe,J as he,K as we,L as Ce,M as Be,N as Se,O as Pe}from"./index-CClg8zN0.js";import{c as Fe,V as Te,m as Ae,a as Re,f as De,b as _,S as Me,d as $,e as G,g as _e,h as J}from"./VInput-Bm1nDkS-.js";import{m as Ne,a as Ee,b as je,u as Ue,c as qe,d as Ie,V as K,e as Q,f as W,g as N}from"./VRow-D54n-R6q.js";import{V as ze,a as He}from"./VTextarea-DUBul2Wg.js";import{V as Oe}from"./VTextField-CqL_3-OK.js";const Le=E({color:String,density:String,...j()},"VBannerActions"),$e=U()({name:"VBannerActions",props:Le(),setup(a,i){let{slots:l}=i;return Y({VBtn:{color:a.color,density:a.density,slim:!0,variant:"text"}}),q(()=>{var u;return t("div",{class:["v-banner-actions",a.class],style:a.style},[(u=l.default)==null?void 0:u.call(l)])}),{}}}),Ge=Fe("v-banner-text"),Je=E({avatar:String,bgColor:String,color:String,icon:ee,lines:String,stacked:Boolean,sticky:Boolean,text:String,...ae(),...j(),...Ne(),...te(),...se({mobile:null}),...ne(),...Ee(),...je(),...le(),...oe(),...re()},"VBanner"),Ke=U()({name:"VBanner",props:Je(),setup(a,i){let{slots:l}=i;const{backgroundColorClasses:u,backgroundColorStyles:f}=ie(a,"bgColor"),{borderClasses:k}=ue(a),{densityClasses:x}=Ue(a),{displayClasses:v,mobile:r}=de(a),{dimensionStyles:d}=ce(a),{elevationClasses:c}=me(a),{locationStyles:w}=qe(a),{positionClasses:C}=Ie(a),{roundedClasses:p}=fe(a),{themeClasses:V}=ve(a),m=L(a,"color"),B=L(a,"density");Y({VBannerActions:{color:m,density:B}}),q(()=>{const S=!!(a.text||l.text),F=!!(a.avatar||a.icon),D=!!(F||l.prepend);return t(a.tag,{class:["v-banner",{"v-banner--stacked":a.stacked||r.value,"v-banner--sticky":a.sticky,[`v-banner--${a.lines}-line`]:!!a.lines},V.value,u.value,k.value,x.value,v.value,c.value,C.value,p.value,a.class],style:[f.value,d.value,w.value,a.style],role:"banner"},{default:()=>{var T;return[D&&t("div",{key:"prepend",class:"v-banner__prepend"},[l.prepend?t(be,{key:"prepend-defaults",disabled:!F,defaults:{VAvatar:{color:m.value,density:B.value,icon:a.icon,image:a.avatar}}},l.prepend):t(Te,{key:"prepend-avatar",color:m.value,density:B.value,icon:a.icon,image:a.avatar},null)]),t("div",{class:"v-banner__content"},[S&&t(Ge,{key:"text"},{default:()=>{var A;return[((A=l.text)==null?void 0:A.call(l))??a.text]}}),(T=l.default)==null?void 0:T.call(l)]),l.actions&&t($e,{key:"actions"},l.actions)]}})})}}),Qe=E({...j(),...Ae()},"VForm"),We=U()({name:"VForm",props:Qe(),emits:{"update:modelValue":a=>!0,submit:a=>!0},setup(a,i){let{slots:l,emit:u}=i;const f=Re(a),k=b();function x(r){r.preventDefault(),f.reset()}function v(r){const d=r,c=f.validate();d.then=c.then.bind(c),d.catch=c.catch.bind(c),d.finally=c.finally.bind(c),u("submit",d),d.defaultPrevented||c.then(w=>{var p;let{valid:C}=w;C&&((p=k.value)==null||p.submit())}),d.preventDefault()}return q(()=>{var r;return t("form",{ref:k,class:["v-form",a.class],style:a.style,novalidate:!0,onReset:x,onSubmit:v},[(r=l.default)==null?void 0:r.call(l,f)])}),De(f,k)}}),Ye={class:"gradient-bg min-h-screen"},Xe={class:"w-100"},Ze={key:0,class:"text-center mt-4 mt-sm-6"},ea={key:1,class:"text-center py-8"},aa={__name:"HomeView",setup(a){Ce();const i=Be("setLoading"),l=ye(),u=b(!1),f=b(!1),k=b(null);b(null);const x=b(!1),v=b("No UserId"),r=b(null),d=b("");ke(async()=>{await p(),await H(v.value),z()});function c(){console.log("MailboxContainer.height",r.value),r.value&&r.value.scrollTo({top:r.value.scrollHeight,behavior:"smooth"})}const w=()=>{x.value=!0,Se(()=>{c()})},C=()=>{var s=window.location.href,e=new URL(s),o=e.searchParams,O={};return o.forEach(function(X,Z){O[Z]=X}),O},p=async()=>{const s=C();s.userid&&(v.value=s.userid),s.language&&(d.value=s.language,console.log("language",d.value))},V=M({name:"",rating:null,message:""}),m=M({show:!1,text:"",color:"green"}),B=M({total:0,averageRating:"0",positive:0,weekly:0}),S=b([]),F=[s=>!!s||"Full name is required",s=>s&&s.length>=2||"Name must contain at least 2 characters"],D=[s=>!!s||"Message is required",s=>s&&s.length>=10||"Message must contain at least 10 characters",s=>s&&s.length<=500||"Message must contain less than 500 characters"],T=async()=>{if(u.value){f.value=!0,i==null||i(!0);try{const s=await _.submitFeedback({name:v.value,message:{role:"user",msg:V.message}});I("Your feedback has been submitted successfully!","green"),A(),await z(),await H(v.value)}catch(s){I("Error submitting feedback","red"),console.error("Error submitting feedback:",s)}finally{f.value=!1,i==null||i(!1)}}},A=()=>{var s;V.name="",V.rating=null,V.message="",(s=k.value)==null||s.resetValidation()},I=(s,e)=>{m.text=s,m.color=e,m.show=!0},z=async()=>{try{const s=await _.fetchStats();console.log(s),Object.assign(B,s)}catch(s){console.error("Error fetching stats:",s)}},H=async s=>{var e;try{const o=await _.fetchFeedbackByName(s);S.value=((e=o[0])==null?void 0:e.message)||[],console.log("feedback-name",o)}catch(o){console.error("Error fetching stats:",o)}};return(s,e)=>(P(),R("div",Ye,[t(K,{fluid:"",class:"pa-0",height:"100vh"},{default:n(()=>[t(Q,{"no-gutters":"",class:"fill-height"},{default:n(()=>[t(W,{cols:"12",class:"d-flex align-center justify-center"},{default:n(()=>[g("div",Xe,[t(K,{class:"py-4 py-sm-8"},{default:n(()=>[t(Q,{justify:"center"},{default:n(()=>[t(W,{cols:"12",sm:"10",md:"8",lg:"6"},{default:n(()=>[e[14]||(e[14]=g("div",{class:"text-center mb-4 mb-sm-8"},[g("h1",{class:"text-h4 text-sm-h3 font-weight-bold text-white mb-2"}," SoulTalk "),g("p",{class:"text-body-1 text-sm-h6 text-blue-lighten-1"}," We're happy to hear your feedback ")],-1)),t($,{class:"elevation-8 rounded-lg"},{default:n(()=>[g("div",{class:"d-flex justify-end pa-2 pa-sm-4",onClick:w},[t(h,{size:"large",color:"red",end:""},{default:n(()=>e[6]||(e[6]=[y("mdi-message-bulleted")])),_:1})]),t(G,{class:"text-center pa-4 pa-sm-6"},{default:n(()=>[t(h,{class:"me-2",color:"primary"},{default:n(()=>e[7]||(e[7]=[y("mdi-message-text")])),_:1}),e[8]||(e[8]=g("span",{class:"text-h6 text-sm-h5"},"Feedback Form",-1))]),_:1}),t(_e,{class:"text-center pb-2 pb-sm-4"},{default:n(()=>e[9]||(e[9]=[y(" Click the top right corner to view replies ")])),_:1}),t(J,{class:"pa-4 pa-sm-6"},{default:n(()=>[t(We,{ref_key:"form",ref:k,modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value=o),onSubmit:xe(T,["prevent"]),class:"text-start"},{default:n(()=>[t(Oe,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o),readonly:"","prepend-inner-icon":"mdi-account",variant:"outlined",rules:F,required:"",class:"mb-3 mb-sm-4 text-start"},null,8,["modelValue"]),t(He,{modelValue:V.message,"onUpdate:modelValue":e[1]||(e[1]=o=>V.message=o),label:"Message","prepend-inner-icon":"mdi-message",variant:"outlined",rules:D,rows:"4",required:"",class:"mb-3 mb-sm-4 text-start"},null,8,["modelValue"]),t(N,{type:"submit",color:"primary",size:"large",block:"",loading:f.value,disabled:!u.value,class:"mb-3 mb-sm-4"},{default:n(()=>[t(h,{start:""},{default:n(()=>e[10]||(e[10]=[y("mdi-send")])),_:1}),e[11]||(e[11]=y(" Submit Feedback "))]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),Ve(l).isAuthenticated?(P(),R("div",Ze,[t(N,{variant:"outlined",color:"white",to:{name:"Admin"},class:"me-3 me-sm-4",size:"large"},{default:n(()=>[t(h,{start:""},{default:n(()=>e[12]||(e[12]=[y("mdi-shield-account")])),_:1}),e[13]||(e[13]=y(" Admin Panel "))]),_:1})])):pe("",!0)]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),t(ze,{modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=o=>x.value=o),"max-width":"600",scrollable:""},{default:n(()=>[t($,null,{default:n(()=>[t(G,{class:"d-flex justify-space-between align-center pa-4"},{default:n(()=>[e[16]||(e[16]=g("span",{class:"text-h6"},"Mailbox",-1)),t(N,{icon:"",onClick:e[3]||(e[3]=o=>x.value=!1),variant:"text"},{default:n(()=>[t(h,null,{default:n(()=>e[15]||(e[15]=[y("mdi-close")])),_:1})]),_:1})]),_:1}),t(J,{class:"pa-3"},{default:n(()=>[g("div",{ref_key:"MailboxContainer",ref:r,style:{"max-height":"70vh","overflow-y":"auto"}},[S.value.length?(P(!0),R(he,{key:0},we(S.value,o=>(P(),Pe(Ke,{avatar:o.role==="user"?"userAvatar.svg":"adminAvatar.svg",text:o.msg,stacked:!1},null,8,["avatar","text"]))),256)):(P(),R("div",ea,[t(h,{size:"64",color:"grey-lighten-1",class:"mb-2"},{default:n(()=>e[17]||(e[17]=[y("mdi-inbox")])),_:1}),e[18]||(e[18]=g("div",{class:"text-h6 text-grey-darken-1"},"No feedback",-1))]))],512)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Me,{modelValue:m.show,"onUpdate:modelValue":e[5]||(e[5]=o=>m.show=o),snacbarText:m.text,snackbarColorBt:m.color},null,8,["modelValue","snacbarText","snackbarColorBt"])]))}},ra=ge(aa,[["__scopeId","data-v-35d9db39"]]);export{ra as default};
